(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{12:function(t,e,a){},25:function(t,e,a){},26:function(t,e,a){},32:function(t,e,a){},40:function(t,e,a){},41:function(t,e,a){},42:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a(1),r=a.n(n),c=a(16),i=a.n(c),o=(a(25),a(2)),l=a(3),d=a(6),h=a(5),u=a(4),j=(a(26),a(19)),b=(a(32),a(12),a(7)),p=(a(13),a(8)),m=a.n(p),v=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={data_type:"genres/piechart"},s}return Object(l.a)(a,[{key:"render",value:function(){var t=this;return Object(s.jsxs)(m.a,{style:{top:"auto",bottom:"auto",backgroundColor:"rgba(0,0,0,0)"},onSelect:function(e){t.props.data_type(e)},children:[Object(s.jsx)(m.a.Toggle,{}),Object(s.jsxs)(m.a.Nav,{defaultSelected:"genres/piechart",children:[Object(s.jsxs)(p.NavItem,{eventKey:"genres",children:[Object(s.jsx)(p.NavIcon,{children:Object(s.jsx)("i",{className:"genres",style:{fontSize:"1.75em"}})}),Object(s.jsx)(p.NavText,{children:"Top Genres"}),Object(s.jsx)(p.NavItem,{eventKey:"genres/piechart",children:Object(s.jsx)(p.NavText,{children:"Pie Chart"})}),Object(s.jsx)(p.NavItem,{eventKey:"genres/barchart",children:Object(s.jsx)(p.NavText,{children:"Bar Chart"})})]}),Object(s.jsxs)(p.NavItem,{eventKey:"artists/",children:[Object(s.jsx)(p.NavIcon,{children:Object(s.jsx)("i",{className:"fa fa-fw fa-line-chart",style:{fontSize:"1.75em"}})}),Object(s.jsx)(p.NavText,{children:"Top Artists"})]})]})]})}}]),a}(r.a.Component),O=a(18),g=a.n(O),x=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={type:"pie"},s.data_genres="",s.data_artisis="",s.get_data_genres=s.get_data_genres.bind(Object(d.a)(s)),s.get_data_artists=s.get_data_artists.bind(Object(d.a)(s)),s}return Object(l.a)(a,[{key:"get_data_genres",value:function(){var t=this.props.genres.data.slice(0,11),e=[],a=[];for(var s in t)s=t[s],e.push(s.name),a.push(s.count);var n,r=this.props.data_type.split("/")[1].split("c")[0];n="bar"===r?[{type:r,y:e.reverse(),x:a.reverse(),orientation:"h"}]:[{type:r,labels:e.reverse(),values:a.reverse()}],this.data_genres=n}},{key:"get_data_artists",value:function(){var t=this.props.artists.data,e=[],a=[];for(var s in t)s=t[s],e.push(s.name),a.push(s.count);var n=[{type:"table",header:{values:[["<b>Artist</b>"],["<b>Count</b>"]],align:["center","center"],line:{width:1,color:"#1ecd97"},fill:{color:"#1ecd97"},font:{family:"Arial",size:15,color:"white"}},cells:{values:[e,a],align:["left","center"],height:30,line:{color:"#1ecd97",width:1},fill:{color:["rgba(0,0,0,0)","rgba(0,0,0,0)"]},font:{family:"Arial",size:15,color:["white"]}}}];this.data_artists=n}},{key:"render",value:function(){var t,e;this.props.data_type.includes("genres")&&(this.get_data_genres(),t=this.data_genres,e="Top Genres"),this.props.data_type.includes("artists")&&(this.get_data_artists(),t=this.data_artists,console.log(this.data_artists),e="Top Artists");var a={width:700,height:500,title:e,paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",font:{color:"white"}};return Object(s.jsx)(g.a,{data:t,layout:a})}}]),a}(r.a.Component),f=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).myCallback=function(t){s.setState({data_type:t})},s.state={loading:!0,genres:[],artists:[],data_type:"genres/piechart"},s.get_artists=s.get_artists.bind(Object(d.a)(s)),s.get_genres=s.get_genres.bind(Object(d.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.get_genres(),this.get_artists()}},{key:"get_genres",value:function(){var t=this,e=this.props.term;b.ajax({url:"http://127.0.0.1:5000/get-genres?term=".concat(e),type:"GET",success:function(e){console.log(e),t.setState({loading:!1,genres:e})}})}},{key:"get_artists",value:function(){var t=this,e=this.props.term;b.ajax({url:"http://127.0.0.1:5000/get-artists?term=".concat(e),type:"GET",success:function(e){console.log(e),t.setState({loading:!1,artists:e})}})}},{key:"render",value:function(){return this.state.loading?Object(s.jsx)("div",{children:"Loading"}):Object(s.jsx)("div",{className:"Analytics",children:Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{children:Object(s.jsx)(v,{data_type:this.myCallback})}),Object(s.jsx)(x,{data_type:this.state.data_type,genres:this.state.genres,artists:this.state.artists})]})})}}]),a}(r.a.Component);function y(t){var e=t.data.map((function(t,e){return Object(s.jsxs)("tr",{className:"th1",style:{textAlign:"left"},children:[Object(s.jsx)("td",{className:"td1",children:t[0]}),Object(s.jsx)("td",{className:"td1",children:t[1]}),Object(s.jsx)("td",{className:"td1",children:t[2]}),Object(s.jsx)("td",{className:"td1",children:t[3]})]},e)}));return Object(s.jsx)("table",{className:"table1",style:{alignItems:"center"},children:Object(s.jsxs)("tbody",{children:[Object(s.jsxs)("tr",{className:"tr1",children:[Object(s.jsx)("th",{className:"th1",style:{textAlign:"left"},children:"Title"}),Object(s.jsx)("th",{className:"th1",style:{textAlign:"left"},children:"Artist"}),Object(s.jsx)("th",{className:"th1",style:{textAlign:"left"},children:"Album"}),Object(s.jsx)("th",{className:"th1",style:{textAlign:"left"},children:"Popularity"})]}),e]})})}function _(t){var e=t.title,a=t.artist,n=t.img_url.map((function(t,n){return Object(s.jsxs)("ul",{class:"img-item",children:[Object(s.jsx)("img",{className:"albums",src:t},n),Object(s.jsxs)("div",{class:"details",children:[Object(s.jsx)("h3",{children:Object(s.jsx)("a",{class:"title",children:e[n]})}),Object(s.jsx)("p",{class:"artist",children:a[n]})]})]})}));return Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{class:"column",children:n.slice(0,10)}),Object(s.jsx)("div",{class:"column",children:n.slice(10,20)}),Object(s.jsx)("div",{class:"column",children:n.slice(20,30)}),Object(s.jsx)("div",{class:"column",children:n.slice(30,40)}),Object(s.jsx)("div",{class:"column",children:n.slice(40,50)})]})}var k=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={table:!0,analytics:!1,term:s.props.time},s}return Object(l.a)(a,[{key:"render",value:function(){var t=this,e=[],a=[],n=[],r=[],c=[],i=[],o=[],l=this.props.data.data;for(var d in l)d=l[d],e.push(d.title),a.push(d.artist),n.push(d.album),r.push(d.popularity),c.push(d.img),i.push(d.uri),o.push(d.artist_href);for(var h=[],u=0;u<e.length;u++){var j=[];j.push(e[u]),j.push(a[u]),j.push(n[u]),j.push(r[u]),h.push(j)}var b,p=this.state.table,m=this.props.time;return b=this.state.analytics?Object(s.jsx)(f,{term:m}):p||"saved"==this.props.time?Object(s.jsx)(y,{data:h}):Object(s.jsx)(_,{img_url:c,title:e,artist:a}),Object(s.jsxs)("div",{className:"top",children:[Object(s.jsx)("button",{onClick:function(){return t.setState({table:!0,analytics:!1})},children:"Table View"}),"saved"!==this.props.time&&Object(s.jsx)("button",{onClick:function(){return t.setState({table:!1,analytics:!1})},children:"Img View"}),Object(s.jsx)("button",{onClick:function(){return t.setState({analytics:!0,table:!1})},children:"Analytics"}),Object(s.jsx)("div",{className:"topSongs",children:b}),this.props.children]})}}]),a}(r.a.Component),N=(a(40),function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={show_term:"",top_short:"",top_med:"",top_long:"",saved_data:"",recent_data:"",loading:!1},s.getData=s.getData.bind(Object(d.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var t=this,e="http://127.0.0.1:5000/get-songs?",a=[];a.push(b.ajax({url:e+"term=short_term",type:"GET"})),a.push(b.ajax({url:e+"term=medium_term",type:"GET"})),a.push(b.ajax({url:e+"term=long_term",type:"GET"})),a.push(b.ajax({url:e+"term=saved",type:"GET"})),a.push(b.ajax({url:e+"term=recent",type:"GET"})),Promise.all(a).then((function(e){t.setState({top_short:e[0],top_med:e[1],top_long:e[2],saved_data:e[3],recent_data:e[4],loading:!1})}))}},{key:"onTopClick",value:function(t){this.setState({show_term:t})}},{key:"renderLoading",value:function(){return Object(s.jsx)("div",{children:"Loading..."})}},{key:"renderPosts",value:function(){var t,e=this,a=this.state.show_term;return t="saved"===a?Object(s.jsx)(k,{data:this.state.saved_data,time:this.state.show_term}):"short_term"===a?Object(s.jsx)(k,{data:this.state.top_short,time:this.state.show_term}):"medium_term"===a?Object(s.jsx)(k,{data:this.state.top_med,time:this.state.show_term}):"long_term"===a?Object(s.jsx)(k,{data:this.state.top_long,time:this.state.show_term}):Object(s.jsx)(k,{data:this.state.recent_data,time:this.state.show_term}),Object(s.jsxs)("div",{className:"back",children:[Object(s.jsxs)("div",{className:"navbar",children:[Object(s.jsxs)("div",{className:"dropdown",children:[Object(s.jsxs)("button",{className:"dropbtn",children:["Top Songs",Object(s.jsx)("i",{className:"fa fa-caret-down"})]}),Object(s.jsxs)("div",{className:"dropdown-content",children:[Object(s.jsx)("button",{onClick:function(){return e.onTopClick("short_term")},children:"Short-Term"}),Object(s.jsx)("button",{onClick:function(){return e.onTopClick("medium_term")},children:"Medium-Term"}),Object(s.jsx)("button",{onClick:function(){return e.onTopClick("long_term")},children:"Long-Term"})]})]}),Object(s.jsx)("button",{className:"dropbtn1",onClick:function(){return e.onTopClick("saved")},children:"Saved Songs "}),Object(s.jsx)("button",{className:"dropbtn1",onClick:function(){return e.onTopClick("recent")},children:"Recently Played"})]}),t]})}},{key:"render",value:function(){return this.state.loading?this.renderLoading():this.renderPosts()}}]),a}(n.Component)),T=["user-top-read","user-read-currently-playing","user-read-playback-state","user-library-read","user-read-recently-played"],w=window.location.hash.substring(1).split("&").reduce((function(t,e){if(e){var a=e.split("=");t[a[0]]=decodeURIComponent(a[1])}return t}),{});window.location.hash="";var C=w,S=(a(41),function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){var t;return Object(o.a)(this,a),(t=e.call(this)).state={token:null,hasToken:!1,loading:!0},t.componentDidMount=t.componentDidMount.bind(Object(d.a)(t)),t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=C.access_token;t&&(this.setState({token:t,hasToken:!0,loading:!1}),window.token=t,b.ajax({url:"http://127.0.0.1:5000/add_token",type:"POST",crossDomain:!0,data:JSON.stringify({token:t}),dataType:"json",success:function(t){b("#main").text(t),this.setState({loading:!1})}}))}},{key:"renderLoading",value:function(){return Object(s.jsx)("div",{children:"Loading..."})}},{key:"render",value:function(){return Object(s.jsx)("body",{className:"login",children:Object(s.jsxs)("div",{className:"login-header",children:[!this.state.token&&Object(s.jsx)("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("d9dca95c2ee54a54b35c890972268f0a","&redirect_uri=").concat("http://localhost:3000/","&scope=").concat(T.join("%20"),"&response_type=token&show_dialog=true"),children:"Login to Spotify"}),this.state.token&&Object(s.jsx)(N,{})]})})}}]),a}(n.Component)),A=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(s.jsxs)(j.a,{children:[Object(s.jsx)(S,{path:"/"}),Object(s.jsx)(N,{path:"/home"}),Object(s.jsx)(k,{path:"/top"})]})}}]),a}(n.Component),D=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).state={haveToken:!1},s.haveToken=s.haveToken.bind(Object(d.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.haveToken()}},{key:"haveToken",value:function(){var t=this;b.ajax({url:"http://127.0.0.1:5000/add_token",type:"GET",success:function(e){"true"===e.token&&t.setState({haveToken:!0})}})}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"App",children:this.state.haveToken?Object(s.jsx)(N,{}):Object(s.jsx)(A,{})})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(s.jsx)(D,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.f4335cbf.chunk.js.map